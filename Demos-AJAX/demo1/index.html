<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8" />
	<title>AJAX | Demo 1</title>
	<script>
		var xhr;
		//creación de la petición http
		function enviarPeticionAJAX(evento)
		{
			evento.target.disabled=true;
			xhr = new XMLHttpRequest();
			//Gestor del evento para cuando cambie la propiedad readyState
			xhr.addEventListener('readystatechange',gestionarRespuesta);
			xhr.open('GET','ajax.php',true);
			xhr.send(null);				
		}
		function gestionarRespuesta(evento)
		{
			//Cuando se ha completado la recepción de la respuesta del servidor
			//y la transacción es correcta
			if(evento.target.readyState == 4 && evento.target.status == 200)
			{
				// Se asignan los datos del encabezado y del contenido
				document.getElementById('encabezados').innerHTML = evento.target.getAllResponseHeaders();
				document.getElementById('contenido').innerHTML = evento.target.responseText;
				document.getElementById('boton').disabled = false;
			}
		}
	</script>
</head>
<body>
	<button id='boton' type='button' onclick='enviarPeticionAJAX(event);'>ENVIAR PETICIÓN</button>
	<h1>Encabezados respuesta</h1>
	<div id='encabezados'></div>
	<h1>Contenido respuesta</h1>
	<div id='contenido'></div>	
</body>
</html>