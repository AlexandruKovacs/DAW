<!DOCTYPE html>
<html  lang="es">
<head>
    <meta charset="utf-8">
	<title>AJAX con JSON</title>
	<script>
	addEventListener('load',inicializarEventos,false);
	function inicializarEventos(){
		var ob=document.getElementById('boton1');
		ob.addEventListener('click',presionBoton,false);
	}

	function presionBoton(e){
		var ob=document.getElementById('dni');
		recuperarDatos(ob.value);
	}

	var conexion1;
	function recuperarDatos(dni){
		conexion1=new XMLHttpRequest();
		conexion1.onreadystatechange = procesarEventos;
		conexion1.open('GET','pagina1.php?dni='+dni, true);
		conexion1.send();
	}

	function procesarEventos(){
		var resultados = document.getElementById("resultados");
		if(conexion1.readyState == 4){
			var datos=JSON.parse(conexion1.responseText);
			var salida = "Apellido:"+datos.apellido+"<br>";
			salida=salida+"Nombre:"+datos.nombre+"<br>";
			salida=salida+"Direcci√≥n donde debe votar:"+datos.direccion;
			resultados.innerHTML = salida;
		} 
		else {
			resultados.innerHTML = "Cargando...";
		}
	}
	</script>
</head>
<body>
	Ingrese dni (solo existen los valores 1,2 y 3):
	<input type="text" name="dni" id="dni" size="10"><br>
	<input type="button" value="Enviar" id="boton1">
	<div id="resultados"></div>
</body>
</html>
